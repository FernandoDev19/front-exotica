<div class="container px-5 py-15">
  <div class="flex flex-col justify-between w-full">
    <div
      class="rounded-xl sm:flex justify-center flex overflow-hidden"
    >
      <div class="flex flex-col justify-center">
        <div class="flex flex-col justify-center text-center mb-6">
          <a routerLink="/home" class="p-0 mb-3">
            <img src="logos/zizicar-exotica.webp" width="120" />
          </a>
          <h1 class="font-bold text-4xl mb-3 text-gray-800">Iniciar Sesión</h1>
          <p class="text-gray-500 text-lg">
            Si ya eres aliado de ZiziCar Ingresa tu correo y contraseña
          </p>
        </div>

        <form class="mb-5" [formGroup]="loginForm" (submit)="login()">
          <div class="mb-5">
            <div class="flex">
              <span
                class="inline-flex items-center px-3 border border-r-0 rounded-l-md border-gray-800 bg-gray-800"
              >
                <fa-icon [icon]="faUser"></fa-icon>
              </span>
              <input
                #emailInput
                formControlName="email"
                id="email"
                type="text"
                placeholder="Correo electrónico"
                class="form-input text-gray-600 w-full border border-gray-400 rounded-r-md py-3 px-4 focus:outline-none focus:ring-2 focus:ring-blue-500"
              />
            </div>
            @if (loginForm.get('email')?.invalid &&
            loginForm.get('email')?.touched) {
            <div>
              @if (loginForm.get('email')?.errors?.['required']) {
              <small class="text-red-500"
                >El correo electrónico es requerido.</small
              >
              } @else if (loginForm.get('email')?.errors?.['email']){
              <small class="text-red-500"
                >Debe ser una dirección de correo electrónico válida.</small
              >
              }
            </div>
            } @if(messageError && messageError != ''){
            <small class="text-red-500">{{ messageError }}</small>
            }
          </div>

          <div class="mb-5">
            <div class="flex">
              <span
                class="inline-flex items-center px-3 border border-r-0 rounded-l-md border-gray-800 bg-gray-800"
              >
                <fa-icon [icon]="faKey"></fa-icon>
              </span>
              <input
                #passwordInput
                formControlName="password"
                id="password"
                type="password"
                placeholder="Contraseña"
                class="form-input w-full border border-gray-400 text-gray-600 py-3 px-4 focus:outline-none focus:ring-2 focus:ring-blue-500"
              />
              <span
                class="inline-flex items-center px-3 bg-white border border-gray-400 border-l-0 rounded-r-md cursor-pointer"
                (click)="showPassword()"
                [title]="spanButtonTitle"
              >
                <fa-icon class="text-gray-800" [icon]="iconEye"></fa-icon>
              </span>
            </div>

            @if (loginForm.get('password')?.invalid &&
            loginForm.get('password')?.touched) {
            <div>
              @if (loginForm.get('password')?.errors?.['required']) {
              <small class="text-red-500">La contraseña es obligatoria.</small>
              } @else if (loginForm.get('password')?.errors?.['minlength']) {
              <small class="text-red-500"
                >La contraseña debe tener un mínimo de 8 caracteres.</small
              >
              }
            </div>
            } @if(messageError && messageError != ''){
            <small class="text-red-500">{{ messageError }}</small>
            }
          </div>

          <button
            class="btn btn-lg bg-blue-500 text-white w-full py-3 rounded-md"
            [class.cursor-pointer]="loginForm.valid"
            [disabled]="loginForm.invalid"
            type="submit"
          >
            Iniciar sesión
          </button>
        </form>

        <p class="text-gray-500 mb-3">
          ¿Olvidaste tu contraseña? Restablece tu contraseña
          <a href="#" class="text-blue-500 font-bold"> Aquí </a>
        </p>
        <p class="text-gray-500 mb-3">
          ¿No estás registrado?
          <a class="text-blue-500 font-bold" routerLink="/auth/register">
            Regístrate
          </a>
        </p>
      </div>
    </div>
  </div>
</div>
